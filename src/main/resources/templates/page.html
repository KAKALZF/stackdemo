<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="/js/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/bootstrap-paginator.js"></script>

    <title>Document</title>
    <script>
        $(function () {

            pageStart();//开始分页

            function pageStart() {//分页函数
                $.ajax({ //去后台查询第一页数据
                    type: "get",
                    url: "/page/news",
                    dataType: "json",
                    data: {page: '1'}, //参数：当前页为1
                    success: function (data) {

                        appendHtml(data.list)//处理第一页的数据

                        var options = {//根据后台返回的分页相关信息，设置插件参数
                            bootstrapMajorVersion: 3, //如果是bootstrap3版本需要加此标识，并且设置包含分页内容的DOM元素为UL,如果是bootstrap2版本，则DOM包含元素是DIV
                            currentPage: data.page, //当前页数
                            totalPages: data.totalPage, //总页数
                            numberOfPages: data.pageSize,//每页记录数
                            itemTexts: function (type, page, current) {//设置分页按钮显示字体样式
                                switch (type) {
                                    case "first":
                                        return "首页";
                                    case "prev":
                                        return "上一页";
                                    case "next":
                                        return "下一页";
                                    case "last":
                                        return "末页";
                                    case "page":
                                        return page;
                                }
                            },
                            onPageClicked: function (event, originalEvent, type, page) {//分页按钮点击事件
                                $.ajax({//根据page去后台加载数据
                                    url: "/page/news",
                                    type: "get",
                                    dataType: "json",
                                    data: {"page": page},
                                    success: function (data) {
                                        appendHtml(data.list);//处理数据
                                    }
                                });
                            }
                        };
                        $('#mypage').bootstrapPaginator(options);//设置分页
                    }
                });
            }

            function appendHtml(list) {//此函数用于处理后台返回的数据，根据自己需求来实现页面拼接
                var tableShow = '';
                tableShow += '<table class="table table-striped">\n' +
                    '    <thead>\n' +
                    '    <tr>\n' +
                    '        <th>名字</th>\n' +
                    '        <th>密码</th>\n' +
                    '        <th>国籍</th>\n' +
                    '    </tr>\n' +
                    '    </thead>\n' +
                    '    <tbody>';
                for (var i = 0; i < list.length; i++) {
                    tableShow += '<tr>';
                    tableShow += '<td>' + list[i].id + '</td>';
                    tableShow += '<td>' + list[i].newsTitle + '</td>';
                    tableShow += '<td>' + list[i].newsUrl + '</td>';
                    tableShow += '</tr>';
                }
                tableShow += ' </tbody>';
                $('#htmlDiv').html(tableShow)
            }
        });
    </script>
</head>
<body>
<!-- 分页容器：显示数据 -->
<div id="htmlDiv"></div>
<!-- 分页容器： 显示分页按钮-->
<div class="col-lg-12" align="center">
    <!-- 注意:3版本的分页容器标签是<ul>，2版本的容器标签是<div> -->
    <ul id="mypage"></ul>
</div>
</body>

</html>
