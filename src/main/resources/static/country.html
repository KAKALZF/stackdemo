<!DOCTYPE html>
<html charset="UTF-8">
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">

</head>
<body>
<div id="app">
    <el-form :inline="true" :model="formInline" class="demo-form-inline">
        <el-form-item label="邮政编码">
            <el-input v-model="formInline.postcode" placeholder="邮政编码"></el-input>
        </el-form-item>
        <el-form-item label="国家">
            <el-select v-model="formInline.country" placeholder="国家">

                <!--       <el-option label="区域一" value="shanghai"></el-option>
                       <el-option label="区域二" value="beijing"></el-option>-->
                <el-option v-for="item in countries" :label="item.cn" :value="item.en"></el-option>
            </el-select>
        </el-form-item>
        <el-form-item>
            <el-button type="primary" @click="onSubmit">查询</el-button>
        </el-form-item>
    </el-form>
    <el-table
            :data="tableData"
            stripe
            style="width: 100%">
        <el-table-column
                prop="cn"
                label="国家"
                width="180">
        </el-table-column>
        <el-table-column
                prop="state"
                label="州"
                width="180">
        </el-table-column>
        <el-table-column
                prop="county"
                label="郡">
        </el-table-column>
        <el-table-column
                prop="city"
                label="市">
        </el-table-column>
        <el-table-column
                prop="community"
                label="地区">
        </el-table-column>
    </el-table>
    <!--分页组件-->
    <my-component></my-component>
    <page-helper :current-page="page" :total="total" @sizeChange="handleSizeChange"
                @currentChange="handleCurrentChange"></page-helper>
</div>
</body>
<!-- import Vue before Element -->
<!--<script src="https://unpkg.com/vue/dist/vue.js"></script>-->
<script src="./vue.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://cdn.bootcss.com/qs/6.7.0/qs.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<!-- 引入 http-vue-loader,html页面映入vue组件使用 -->
<script src="https://unpkg.com/http-vue-loader"></script>
<script>
    let vm = new Vue({
        el: '#app',
        components: {
            'page-helper': httpVueLoader('./page-helper.vue'),
            'my-component': httpVueLoader('my-component.vue')
        },
        data: function () {
            return {
                visible: false,
                page: 1,
                size: 10,
                total: 30,
                formInline: {},
                tableData: [{
                    cn: '2016-05-02',
                    state: '王小虎',
                    county: '上海市普陀区金沙江路 1518 弄',
                    city: '上海市普陀区金沙江路 1518 弄',
                    community: '上海市普陀区金沙江路 1518 弄'
                }, {
                    cn: '2016-05-03',
                    state: '王小虎',
                    county: '上海市普陀区金沙江路 1518 弄',
                    city: '上海市普陀区金沙江路 1518 弄',
                    community: '上海市普陀区金沙江路 1518 弄'
                }, {
                    cn: '2016-05-04',
                    state: '王小虎',
                    county: '上海市普陀区金沙江路 1518 弄',
                    city: '上海市普陀区金沙江路 1518 弄',
                    community: '上海市普陀区金沙江路 1518 弄'
                }, {
                    cn: '2016-05-05',
                    state: '王小虎',
                    county: '上海市普陀区金沙江路 1518 弄',
                    city: '上海市普陀区金沙江路 1518 弄',
                    community: '上海市普陀区金沙江路 1518 弄'
                }],
                countries: [{cn: "日本", en: "Japan", idChar: "J"}, {cn: "澳大利亚", en: "Australia", idChar: "A"}]
            }
        },
        methods: {
            handleSizeChange(size) {
                this.size = size;
                this.getData(this.page, size);
            },
            handleCurrentChange(page) {
                this.page = page;
                this.getData(page, this.size);
            },
            onSubmit() {
                console.log('submit!');
                axios({
                    method: 'post',
                    url: '/postcode/getAddressByCode',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    //数据要转化
                    data: Qs.stringify(this.formInline)
                }).then(resp => {
                    console.log("resp==", resp);
                    if (resp.data.code == 200) {
                        this.tableData = resp.data.data;
                        console.log("tableData==", tableData);
                    } else {
                    }
                }).catch(function (error) {
                });

            }
        },
        mounted() {
        },
        beforeCreate() {
            axios.get('/postcode/getCountries', {})
                .then((response) => {
                    console.log(response);
                    this.countries = response.data.data;
                    console.log("countries===", this.countries);
                }).catch(function (error) {
                console.log(error);
            });
        },
//获取列表数据
        getData: function (page, size) {
        },
    })
</script>

</html>

